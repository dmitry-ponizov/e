define("coreloader",["microajax"],function(e){function n(n){var t=n.timeout||"1000",r=n.customerActivityHeader,o=n.businessEventToken;return e.setTimeout(t),e.setCustomerActivityHeader(r),e.setBusinessEventToken(o),e.setNativeAppHeader(C()),e.get(n.url)}function t(e){var n=(e||"").trim(),t=new RegExp("^\\s*(USA|CNDA)","i").exec(n),r=Array.isArray(t)&&t.length>=1?t[1]:"USA";return r.toUpperCase()}function r(e){var n=((e||"").trim(),new RegExp("^\\s*(en-us|es-us|fr-ca|en-ca)","i").exec(e)),t=Array.isArray(n)&&n.length>=1?n[1]:"en-us";return t.toLowerCase()}function o(){var e=document.cookie,n=new RegExp("servicing_country=\\s*([a-zA-Z]*)","i").exec(e),t=Array.isArray(n)&&n.length>=1?n[1]:"",r=document.domain||"";return t&&(document.cookie="SERVICING_COUNTRY=; expires=Thu, 01-Jan-70 00:00:01 GMT; Domain="+r),t.trim()}function i(e){var n=document.cookie,t=new RegExp(e+"=\\s*([a-zA-Z0-9]*)","i").exec(n),r=Array.isArray(t)&&t.length>=1?t[1]:"";return r.trim()}function u(e){var n=(window.EASE_SC||"").toUpperCase(),r=(o()||"").toUpperCase(),i=(e||"").toUpperCase();return k(n)?(S="injected",t(n)):k(r)?(S="cookie",t(r)):k(i)?(S="header",t(i)):(S="default",t("USA"))}function a(e,n){var t=u(n),o=r(e);return y="USA"===t?"US":"CA",b=i("TLTSID"),e&&(U=!1),"US"===y&&T(o)||"CA"===y&&E(o)?void(v=x(o)):"US"!==y||T(o)?"CA"!==y||E(o)?void 0:void(v="en-CA"):void(v="en-US")}function s(){return S}function c(){var e="default"===S?"N/A":y,n=document.domain,t=e+"-"+S+"-"+n;return t}function d(){return v}function w(){return y}function f(){return b||"N/A"}function A(){return g()?"mobileiphone5.x":C()?"MobileAndroid5.x":"ease_web"}function p(){return window.easeweb&&!l(window.easeweb)&&(window.easeweb.android||window.easeweb.ios)||!1}function C(){return p()&&!l(window.easeweb)&&window.easeweb.android}function g(){return p()&&!l(window.easeweb)&&window.easeweb.ios}function l(e){return e&&0===Object.keys(e).length&&e.constructor===Object}function m(){p()&&window.close()}var v="en-US",y="US",S="default",b="",U=!0,x=function(e){return e.substring(0,3)+e.substring(3,5).toUpperCase()},k=function(e){return-1!==["USA","CNDA"].indexOf(e.trim())},E=function(e){return-1!==["en-ca","fr-ca"].indexOf(e)},T=function(e){return-1!==["en-us","es-us"].indexOf(e)};return{getCountryForLogs:c,getTealeaf:f,arbitrateCountry:u,getCountrySource:s,getCountryCookie:o,parseLocale:r,parseServicingCountry:t,makeAjaxCall:n,setLocalization:a,getLocale:d,getCountry:w,getSiteCatalystSystem:A,isNativeMobileApp:p,isAndroidApp:C,isiOSApp:g,postMessage:postMessage,postClose:m}});