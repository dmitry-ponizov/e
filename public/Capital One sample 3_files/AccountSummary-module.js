define("AccountSummaryModule",["angular","moment","moment-timezone"],function(e,t,a){"use strict";function n(e,t,a,n,o,r,c,i,s,u,l,m,d,g,y,f,p,b,S,A,C,v,h,T,D){u.caseInsensitive(!0);var w={name:"accountSummary",url:"/accountSummary",title:g["ease.core.acctsummary.title.label"],pageViewObject:{levels:["account summary"]},data:{hideBackButton:!0},resolve:{featureToggleData:["featureToggleFactory",function(e){return e.initializeFeatureToggleData()}],accountSummaryData:["summaryService",function(e){return e.inSessionAlready?(e.inSessionAlready=!1,e.get().then(function(e){return e})):e.set().then(function(e){return e})}],ummPaymentDependencies:["$ocLazyLoad",function(e){return e.load({name:"UMMPaymentModule",files:[n.get("services","UMMPayment")]})}],accountSummaryDependencies:function(){require(["AccountSummaryServices","AccountSummaryController","AccountSummaryDirectives","AccountSummarySingleProdService"])},loadWidgetArea:["$ocLazyLoad","featureToggleData","EaseConstant","$log",function(e,t,a,n){if(t[a.features.enableWidgetFramework])return e.load({name:"WidgetAreaModule",files:[l.get("component",["AccountSummary","WidgetArea"]),l.get("controller",["AccountSummary","WidgetArea"]),l.getFile("features/Widgets/VirtualCards/VirtualCardsWidget-service.js"),l.getFile("features/Widgets/Harmony/HarmonyWidget-service.js"),l.get("service",["AccountSummary","WidgetArea"])],serie:!0}).then(function(){return!0},function(e){return n.warn("Error loading widget area",e),!1})}],refreshGlobalMessages:["messagingService","$state",function(e,t){var a=t.current.data&&!t.current.data.doNotRefreshGlobalMessages||!t.current.data;e.initGlobalMessages(a)}],refreshAccountMessages:["accountSummaryData","messagingService",function(e,t){t.initAccountMessagesOnL1(e.accounts)}],quickActionMenu:["adobeCampaignUtils",function(e){return e.globalOffersCall(t.kAdobeTargetGlobalMbox,{baseline:"core"}).then(function(t){return e.parseAdobeTargetFullResponse(t,"QAMButton")},function(e){})}],heroBarNGElement:["featureToggleData","angularElementsUtils",function(e,t){var a=e["ease.core.herobar"];return!!a&&t.getAngularElementsDependencies().then(function(){return t.getAngularElementsFeature(["ease-web-core-hero-bar"]).then(function(e){return!!e})}).catch(function(){return!1})}],widgetAreaDependencies:["angularElementsUtils",function(e){return e.getAngularElementsDependencies().then(function(){return e.getAngularElementsFeature(["ease-web-core-widget-area"])})}],accountSummaryElement:["featureToggleData","EaseConstant","angularElementsUtils",function(e,t,a){var n=e[t.features.enableAngularAccountSummary];return!!n&&a.getAngularElementsDependencies().then(function(){return a.getAngularElementsFeature(["ease-web-core-account-summary"]).then(function(e){return!!e})}).catch(function(){return!1})}],showNGAccountSummaryErrorMessage:["featureToggleData","angularElementsUtils","EaseConstant",function(e,t,a){var n=e[a.features.enableAngularAccountSummaryErrorMessage];return!!n&&t.getAngularElementsDependencies().then(function(){return t.getAngularElementsFeature(["ease-web-core-account-summary-error-message"]).then(function(e){return!!e})}).catch(function(){return!1})}],singleProductViewNGElement:["featureToggleData","angularElementsUtils",function(e,a){var n=e[t.features.showAngularSingleProductView];return!!n&&a.getAngularElementsDependencies().then(function(){return a.getAngularElementsFeature(["ease-web-core-single-product-view"]).then(function(e){return!!e})}).catch(function(){return!1})}]},controller:"AccountSummaryController",controllerAs:"summary",templateUrl:m.get("AccountSummary")};D.addAngularJSRouteForNGElement({parentState:w,stateName:t.states.kKnowYourCustomer,stateUrl:"knowYourCustomer",angularDependencies:["ease-web-core-know-your-customer"],title:g["ease.core.knowyourcustomer.page.title"],featureToggles:["ease.core.knowyourcustomer"],template:"<c1-element-core-features-know-your-customer></c1-element-core-features-know-your-customer>"}),o.set(w,"accountSummary.transfer","accountSummary.transferSuccess","accountSummary.transferCancel","accountSummary.transferCancelConfirm","accountSummary.transferError","accountSummary.transferEdit"),s.set(w,"accountSummary.atmFinder"),d.set(w,"accountSummary.eno"),A.set(w,"accountSummary.enoextension"),f.set(w,t.states.kFrontBookEnd,t.states.kBackBookEnd),h.set(w),T.set();var k=o.get(),M=k.transferStart,B=k.transferSuccess,E=k.transferEdit,P=k.transferCancel,L=k.transferCancelConfirm,O=k.transferError,N=s.get(),I=d.get(),R=A.get(),U=f.get(),x=N.atmFinder,q=h.get(),F=T.get();y.setAccountChooserStates({name:w.name,siteCatalyst:["account summary"]}),e.state(w).state(M).state(B).state(E).state(P).state(O).state(L).state(x).state(I.eno).state(R).state(U.front).state(U.back).state(q).state(F.showDoc).state(F.setup),a.set("accountSummary.paymentSummary",w),r.set("SummAccPrefAddExtAccount",w,{levels:["add external account","account information"]}),c.addState(w),i.addState(w),S.set("accountSummary.securityAlertModal",w,"/alerts/securityAlerts"),b.set("accountSummary.alertModal",w,"/alerts/:accountReferenceId"),v.initializeStepsStateFromConfig(C.config,w)}var o=e.module("summaryModule",["ui.router","restangular","oc.lazyLoad","EaseProperties","ContentProperties","easeAppUtils","coreUtils","UMMPaymentModule","TransferModule","RetailAccountLinks","ContentAccountLinks","AtmFinderModule","EnoModule","InterstitialMessageModule","TransferExternalAccountModule","BookendModule","PaperlessModule","EnoExtensionModule","StepModule","AccountSetupLaunchModule","DocumentCenterModule","CampaignModule"]);return n.$inject=["$stateProvider","EaseConstant","paymentStateProvider","easeFilesProvider","transferStateProvider","addAccountStateProvider","AddDebitCardRouteProvider","ContactInfoRouteProvider","AtmStateProvider","$urlMatcherFactoryProvider","easeCoreFilesProvider","easeCoreTemplatesProvider","EnoStateProvider","i18nContent","verifyAccountStateProvider","BookendStateProvider","PaperlessStateProvider","alertModalStateProvider","securityAlertModalStateProvider","EnoExtensionStateProvider","StepsConfigProvider","StepStateProvider","AccountSetupLaunchStateProvider","DocumentCenterStateProvider","AngularJSRouteProvider"],o.config(n),o}),define("AccountSummaryServices",["angular"],function(e){"use strict";function t(e,t,a){return{payNow:function(e){this.paymentParam=e||this.paymentParam,t.go("accountSummary.paymentSummary",this.paymentParam)},getSummaryTypeTemplate:function(e){var t="/ease-ui/dist/features/AccountSummary/";switch(e){case"SA":case"DDA":case"ILA":case"MMA":case"AL":case"CC":case"CD":case"COI":case"LOC":return t+"html/partials/tile.html";case"unavailable":return t+"html/partials/details/accountSummary-unavailable-partial.html";case"restricted":return t+"html/partials/details/accountSummary-restricted-partial.html";case"closed":return t+"html/partials/details/accountSummary-closed-partial.html";case"togglerestricted":return t+"html/partials/details/accountSummary-toggle-partial.html";default:return t+"html/partials/default.html"}},getSecondaryDataForLob:function(e,t,a){var n=e.category;if(e.accountMessage&&e.accountMessage.length>0&&(e.accountMessage.forEach(function(a,n){a.messageId===t.messageId&&e.accountMessage.splice(n,1)}),e.accountMessage.length>0))return e.accountMessage[0];if(!(a>1))return{message:"",attrVal:""};switch(n){case"CC":return"undefined"!=typeof e.availableCredit?{message:"Available Credit: ",attrVal:null}:{};case"MMA":case"DDA":case"DDA360":case"SA":case"SA360":return e.hasOwnProperty("secondaryBalance")?{message:"Current Balance: ",attrVal:"secondaryBalance"}:{message:"",attrVal:""};case"AL":return e.hasOwnProperty("todayPayoffAmount")?{message:"TODAYS'S PAYOFF: ",attrVal:"todayPayoffAmount"}:{message:"",attrVal:""};default:return{message:"",attrVal:""}}},getModalTemplate:function(t){switch(t){case"SA":return e.kPathUMMPaymentemplate+"/html/UMMPayment-index.html";case"CD":return e.kPathTransactiontemplate+"/html/Transfer-index.html";default:return e.kPathUMMPaymentemplate+"/html/UMMPayment-index.html"}},showSecondaryData:function(e){return!!(0===e.secValue||e.secValue&&e.secValue.toString().trim())},formatSecondaryData:function(e,t){var n={};switch(e.category){case"CC":return 0===e.availableBalance||e.availableBalance?(n.secLabel=a["ease.core.acctsummary.availcred.label"],n.secValue=e.availableBalance):(n.secLabel=a["ease.core.acctsummary.availcred.label"],n.secValue=""),n;case"MMA":case"DDA":case"DDA360":case"SA":case"CD":case"SA360":return 0===e.secondaryBalance||e.secondaryBalance?(n.secLabel=a["ease.core.acctsummary.currbal.label"],n.secValue=e.secondaryBalance):(n.secLabel=a["ease.core.acctsummary.currbal.label"],n.secValue=""),n;case"AL":return 0===e.secondaryBalance||e.secondaryBalance?(n.secLabel=a["ease.core.acctsummary.payoff.label"],n.secValue=e.secondaryBalance):(n.secLabel=a["ease.core.acctsummary.payoff.label"],n.secValue=""),n;default:return n.secLabel="",n.secValue="",n.isInterest=!1,n}},pubsubBtnTrackAnalyticswithMsg:function(e,t){return t?{name:e,interactionMessage:{click:t}}:{name:e}}}}var a=e.module("summaryModule");return a.factory("TemplateSelectionFactory",t),t.$inject=["EaseConstant","$state","i18nContent"],a});var Type;!function(e){e.Bank="B",e.Card="C"}(Type||(Type={}));var ProductCategory;!function(e){e.Card="CC",e.Savings360="SA",e.Checking360="DDA",e.Retail="MMA"}(ProductCategory||(ProductCategory={})),define("AccountSummaryController",["angular","moment","moment-timezone"],function(e,t,a){"use strict";function n(a,n,o,r,c,i,s,u,l,m,d,g,y,f,p,b,S,A,C,v,h,T,D,w,k,M,B,E,P,L,O,N){function I(e){return!("COI"===e.category&&!x[i.features.enableCofiTileDisplay])}var R=this,U=this,x=p.getFeatureToggleData(),q=x[i.features.cardRewards],F=x[i.features.enableNewWidgetFramework],_=u.accounts.filter(I);y.getInterstitialMessageOnL1().then(function(e){return v.isTwoClickInterstitial(e)?v.openAngularInterstitial(e,!1):(e&&e.messageStyle===i.states.kUpdateInfo&&(d.pageView({levels:["anniversary page ","message received"]}),h.log("Anniversary Page - We received the request to load updateinfo page")),void v.handleInterstitialMessage(e))});var V={qamButton:{currentExperience:"",type:"",menuList:{},experiences:{A:{icon:""},B:{icon:"icon-overflow-circle-kabab"},C:{icon:"icon-overflow-horizontal"},D:{icon:"icon-circle-plus"}},menuNavigation:function(e,t,a){var n={accountReferenceId:t.referenceId,ProductName:"Card",accountDetails:{lineOfBusiness:t.category,accountNumber:t.accountNumberTLNPI}};o.go(m.SelectDetailsTransaction(t).lobType+e,n).then(function(){U.stopPropagation(a),U.setTileLoadingOnAccount(t,!1)})},visible:function(e){return!!U.AB_TEST.qamButton.menuList[e]},menuOptions:{C:[{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:make a payment:link"}),R.payNow(e,t,t.index)},label:"Make a Payment",display:function(){return U.AB_TEST.qamButton.visible("makePayment")}},{action:function(e,t){e.cancelBubble=!0,d.pubsubTrackAnalytics({name:"brick menu:view transactions:link"}),e._quickAction="view transactions",R.goToDetail(e,t,t.index)},label:"View Transactions",display:function(){return U.AB_TEST.qamButton.visible("viewTransactions")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:payment activity:link"}),U.AB_TEST.qamButton.menuNavigation("Details.transactions",t,e)},label:"Review Payment Activity",display:function(){return U.AB_TEST.qamButton.visible("viewPaymentActivity")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:rewards:link"}),U.AB_TEST.qamButton.menuNavigation("Details.rewards",t,e)},label:"View Rewards",display:function(e){var t=U.reward.isClickable(e),a=U.reward.display(e);return t&&a&&U.AB_TEST.qamButton.visible("viewRewards")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:statements:link"}),U.AB_TEST.qamButton.menuNavigation("Details.transactions.statementOpen",t,e)},label:"View Statements",display:function(){return U.AB_TEST.qamButton.visible("viewStatements")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:download transaction:link"}),U.AB_TEST.qamButton.menuNavigation("Details.transactions.downloadTransactions",t,e)},label:"Download Transactions",display:function(){return U.AB_TEST.qamButton.visible("downloadTransactions")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:transfer balance:link"}),U.AB_TEST.qamButton.menuNavigation("Details.Offers.balanceTransfer",t,e)},label:"Transfer a Balance",display:function(){return U.AB_TEST.qamButton.visible("transferBalance")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:lock card:link"}),U.AB_TEST.qamButton.menuNavigation("Details.transactions.cardLock",t,e)},label:"Lock Card",display:function(){return U.AB_TEST.qamButton.visible("lockCard")}}],B:[{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:transfer balance:link"}),t.actionButton.action="transfer",U.actionButton(e,t,t.index)},label:"Make a Transfer",display:function(){return U.AB_TEST.qamButton.visible("makeTransfer")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:view account details:link"}),R.goToDetail(e,t,t.index)},label:"View Account Details",display:function(){return U.AB_TEST.qamButton.visible("viewDetails")}},{action:function(e,t){d.pubsubTrackAnalytics({name:"brick menu:services and settings:link"});var a={accountReferenceId:t.referenceId.replace(/\//g,"%252F"),ProductName:t.originalProductName.replace(/\s+/g,""),accountDetails:{lineOfBusiness:t.category,accountNumber:t.accountNumberTLNPI}};c.url("/"+a.ProductName+"/"+a.accountReferenceId+"/Services")},label:"More Account Services",display:function(){return U.AB_TEST.qamButton.visible("moreServices")}}]}}};if(E.globalOffersCall(i.kAdobeTargetGlobalMbox,{baseline:"core"}).then(function(e){var t=E.parseAdobeTargetFullResponse(e,"QAMButton");t&&(R.AB_TEST.qamButton.currentExperience=t.experience?t.experience:"",R.AB_TEST.qamButton.type="B"===t.type?Type.Bank:Type.Card,R.AB_TEST.qamButton.menuList=t.menu?t.menu:{})},function(e){}),U.i18nContent=T,U.pendingRequest=!1,U.isButtonClicked=!1,U.activeButton={},U.accounts=_,U.errorMessage=u.errorMessage,U.cofiCTAButtonFeatureToggle=x[i.features.cofiCTAButton],U.showSpinners=!1,U.errorOptions=i.defaultErrorOptions,U.AB_TEST=V,U.showHeroBarNGElement=P,U.showAccountSummaryElement=L,U.showNGAccountSummaryErrorMessage=O,U.isWidgetUpgrade=F,U.showSingleProductViewNGElement=N,"undefined"==typeof r.sessionStorage.prefetchCheck){k.preFetchLOB(_);try{r.sessionStorage.setItem("prefetchCheck",!0)}catch(e){h.log("Your web browser does not support storing settings locally")}}n.$on("snag",function(e,t){t&&(U.loadingButton={},U.enableActions())});var j=n.$on(i.listeners.bookendsSpinner,function(e,t){U.showSpinners=t});a.$on("destroy",j),e.extend(U,{getGreet:function(){if(""!==U.greeting.message)return U.greeting.message;var e=new Date,t=e.getHours();return t>=0&&12>t?U.i18nContent["ease.core.acctsummary.hero.greetingMessage.morning"]:t>=12&&18>t?U.i18nContent["ease.core.acctsummary.hero.greetingMessage.afternoon"]:U.i18nContent["ease.core.acctsummary.hero.greetingMessage.evening"]},greeting:"",bannerUrl:"/ease-ui/dist/features/AccountSummary/html/partials/hello.html",accountsUrl:"/ease-ui/dist/features/AccountSummary/html/partials/accounts.html",recentTransactionsHTML:"/ease-ui/dist/features/AccountSummary/html/partials/recent-transactions.html",arrownDownIcon:i.arrowDownIcon,on:!0,viewMoreDisabled:!0,errorFlag:!1,getRecoveryContent:function(e){return e.split("<br />")},getAriaTileMsg:function(){var e=[];return Array.prototype.push.apply(e,arguments),arguments[0].format.apply(arguments[0],e.slice(1,arguments.length-1))},getBankTransactionAmountClass:function(e){var t=!1;return e.transactionAmount?("Credit"===e.debitCardType&&(t=!0),t):t},getCreditTransactionAmountClass:function(e){var t=!1;return e.transactionAmount?("creditTransaction"===e.creditTransaction&&(t=!0),t):t},isScheduledTransaction:function(e,t){var a=!1;return e&&"al"===e.toLowerCase()?a:("scheduled"===t.transactionState.toLowerCase()&&(a=!0),a)},getAriaTransactionMsg:function(e){if(e){var t=new Date(e.transactionDate),a=t.getUTCDate()<10?"0"+t.getUTCDate():t.getUTCDate(),n="ease.core.acctsummary.transaction."+e.transactionState.toUpperCase()+".label";return U.getAriaTileMsg(U.i18nContent[n],e.transactionAmount,S.DATETIME_FORMATS.MONTH[t.getMonth()],a,e.transactionDescription,!1)}return""},focusId:"",root:n,loadingButton:{},transfer:function(e,t,a){e.stopPropagation();var n=m.SelectDetailsTransaction(t).pubSubLob;U.isButtonClicked?(e.stopImmediatePropagation(),e.stopPropagation()):(e.cancelBubble=!0,U.pendingRequest=!0,U.isButtonClicked=!0,U.activeButton=e.currentTarget,U.activeButton&&(U.activeButton.disabled=!0),U.selectedModal=a,U.loadingButton[a]="loading",e.currentTarget&&(U.focusId=e.currentTarget.id),U.AB_TEST.qamButton.currentExperience>="B"&&!e.currentTarget&&(U.loadingButton[a]=""),f.setCurrentLOB("accountSummary"),o.go("accountSummary.transfer",{category:t.category,subCategory:n,referenceId:t.referenceId,focusId:U.focusId}).then(function(){U.enableActions(),U.loadingButton[a]="",U.setTileLoadingOnAccount(t,!1)}))},refreshAccountSummary:function(){C.notify("accountSummary",function(){o.go("accountSummary",{},{reload:!0}).then(U.enableActions)})},payNow:function(e,t,a){function n(){U.setTileLoadingOnAccount(t,!1),U.loadingButton[a]="",U.enableActions(),i.isEnableActionButton=!0}if(U.isButtonClicked)e.stopImmediatePropagation(),e.stopPropagation();else{e.cancelBubble=!0,U.pendingRequest=!0,U.isButtonClicked=!0,U.activeButton=e.currentTarget||{},U.activeButton.disabled=!0,U.selectedModal=a,e&&e.currentTarget&&(U.focusId=e.currentTarget.id),U.loadingButton[a]="loading";var o=(m.SelectDetailsTransaction(t).pubSubLob,{lineOfBusiness:t.category,isAccountDataAvailable:"",stopSpinner:n,refreshAccountSummary:U.refreshAccountSummary});U.paymentParam={accountReferenceId:t.referenceId,payment:o},l.payNow(U.paymentParam)}},changeState:function(e,t){var a=m.getSummaryData().accounts,n=w.getAcctRefIdFromPath(t),o=w.getLob(a,n),r=w.buildUrl(n,e,t);w.openModal(o,n,r)},goToLink:function(e){if(e.path){var t=e.path.split("/");if(e.path.toLowerCase().indexOf("accountsummary")>-1)switch(t[t.length-1].toLowerCase()){case"whatsnewvideo":this.changeState(t,e.path);break;case"linkaccount":m.redirectToAutoLoanAccountLinking(_,void 0,e);break;default:m.redirectLinking(e)}else m.redirectLinking(e);d.pubsubTrackAnalytics({name:"global messaging:link",interactionMessage:{click:e.messageAnalyticsTracker}}),e.responseUrlHref&&y.responseMessageApi(e.responseUrlHref,"ACCEPT","summary","50000")}},enableActions:function(e){U.pendingRequest=!1,U.isButtonClicked=!1,U.activeButton.disabled=!1,U.activeButton={},e&&(e.disabled=!1)},stopPropagation:function(e){U.enableActions(),e.stopImmediatePropagation(),e.preventDefault()},actionButton:function(e,t,a){if(U.isButtonClicked)return e.stopPropagation(),void e.stopImmediatePropagation();switch(t.actionButton.action){case"payment":e.cancelBubble=!0,i.isEnableActionButton&&(i.isEnableActionButton=!1,d.pubsubTrackAnalytics({name:t.actionButton.buttonText.toLowerCase()+":button",interactionMessage:{click:t.actionButton.messageAnalyticsTracker}}),U.handlekeyEvents(e),this.payNow(e,t,a));break;case"transfer":d.pubsubTrackAnalytics({name:t.actionButton.buttonText.toLowerCase()+":button",interactionMessage:{click:t.actionButton.messageAnalyticsTracker}}),this.transfer(e,t,a);break;case"accountdetails":t.subCategory&&"retail"===t.subCategory.toLowerCase()&&x&&!x[i.features.enableRetailNavigation]?(r.open(b.urlRetail,"_blank").opener=null,U.enableActions(),e.stopPropagation()):t.subCategory&&"retail"===t.subCategory.toLowerCase()&&x&&x[i.features.enableRetailNavigation]&&-1===["DDA","SA","MMA"].indexOf(t.category)?(r.open(b.urlRetail,"_blank").opener=null,U.enableActions(),e.stopPropagation()):("default"===t.actionButton.pubsub?d.pubsubTrackAnalytics(l.pubsubBtnTrackAnalyticswithMsg("default view accounts:button",t.actionButton.messageAnalyticsTracker)):d.pubsubTrackAnalytics(l.pubsubBtnTrackAnalyticswithMsg("view accounts:button",t.actionButton.messageAnalyticsTracker)),this.goToDetail(e,t,a))}t.actionButton.responseUrlHref&&y.responseMessageApi(t.actionButton.responseUrlHref,"ACCEPT","summary","50000")},accountSummaryTransactionData:[],accountSummaryData:U.accounts,storageName:s.storageName(),currentFeature:"AccountSummary",productType:"default",accountNumber:"",selected:"",selectedModal:"",showSecondaryData:!1,isSmallBusinessNonPrimaryAccount:function(){return x[i.features.smallBusinessHideSingleAccountview]&&e.isDefined(U.accountSummaryData[0])&&i.lineOfBusiness.CreditCard===U.accountSummaryData[0].category.toUpperCase()&&i.accountUseType.businessDescription===U.accountSummaryData[0].accountUseType.toUpperCase()&&i.customerRole.primary!==U.accountSummaryData[0].customerRole.toUpperCase()},showRecentTransactions:function(){return!U.isSmallBusinessNonPrimaryAccount()},loadingModal:function(e){return e===U.selectedModal?"loadingModal":""},isNotClikable:{},isideAccount:{},showHeaderTransaction:function(e,t){return 0===e||e>0&&U.accountSummaryTransactionData[e-1].transactionState!==t.transactionState},showTransactionStatus:function(e){return"pending"===e.transactionState.toLowerCase()||"scheduled"===e.transactionState.toLowerCase()},showTransactionDate:function(e){return"posted"===e.transactionState.toLowerCase()||"scheduled"===e.transactionState.toLowerCase()||"pending"===e.transactionState.toLowerCase()&&"al"===U.accountSummaryData[0].category.toLowerCase()},isLogoVisible:function(e){return e.categoryIconURL&&""!==e.categoryIconURL?"":"noImg"},showTransactionClass:function(e){var t=e.transactionState&&e.transactionState.toLowerCase()?e.transactionState.toLowerCase():null;switch(t){case"pending":return"pending";case"scheduled":return"scheduled";case"posted":return"posted";default:return""}},dateStringFormat:function(e,a){void 0===a&&(a="");var n=t.utc(e);return x[i.features.enableShowETDateTime]?n.tz("America/New_York").format(a):n.local().format(a)},translateTransactionState:function(e){var t=e&&e.transactionState?e.transactionState.toLowerCase():"";switch(t){case"pending":return T["ease.common.pending"];case"posted":return T["ease.common.posted"];case"scheduled":return T["ease.common.scheduled"];default:return t}},showNegativeSignAutoLoan:function(e){var t=U.accountSummaryData[0].category&&U.accountSummaryData[0].category.toUpperCase()?U.accountSummaryData[0].category.toUpperCase():null,a=e.transactionState&&e.transactionState.toUpperCase()?e.transactionState.toUpperCase():null,n=e.transactionType&&e.transactionType.toUpperCase()?e.transactionType.toUpperCase():null;return"AL"===t&&("SCHEDULED"===a||"PENDING"===a)&&"CREDIT"===n},alScheduledPendingTx:function(e){var t=U.accountSummaryData[0].category.toUpperCase(),a=e.transactionState&&e.transactionState.toUpperCase()?e.transactionState.toUpperCase():null;return"AL"===t&&("SCHEDULED"===a||"PENDING"===a)},alPostedPaymentTx:function(e){var t=U.accountSummaryData[0].category.toUpperCase(),a=e.transactionState&&e.transactionState.toUpperCase()?e.transactionState.toUpperCase():null,n=e.transactionType&&e.transactionType.toUpperCase()?e.transactionType.toUpperCase():null;return"AL"===t&&"POSTED"===a&&"CREDIT"===n},viewMoreTransactions:function(e){U.goToDetail(e,U.accountSummaryData[0],0)},handlekeyEvents:function(e){U.enableActions(),e.cancelBubble=!0,e.stopImmediatePropagation()},goToDetail:function(e,t,a,n){e&&e.currentTarget&&(U.focusId=e.currentTarget.id);var c=e.target.localName||e.srcElement.localName;if("undefined"!=typeof c&&"keypress"===e.type&&"button"===c&&!U.isButtonClicked)return e.stopPropagation(),void e.stopImmediatePropagation();if(!U.isButtonClicked){if(U.isButtonClicked=!0,e&&e.currentTarget&&(U.activeButton=e.currentTarget,U.activeButton.disabled=!0),U.pendingRequest=!0,t.subCategory&&"retail"===t.subCategory.toLowerCase()&&x&&!x[i.features.isRetailToggleRestricted]&&"View More"!==e.currentTarget.innerHTML)return void U.enableActions();if(t.subCategory&&"retail"===t.subCategory.toLowerCase()&&x&&!x[i.features.enableRetailNavigation])r.open(b.urlRetail,"_blank").opener=null,U.handlekeyEvents(e);else if(t.subCategory&&"retail"===t.subCategory.toLowerCase()&&x&&x[i.features.enableRetailNavigation]&&!m.isL2RetailNavigationSupported(t))U.handlekeyEvents(e),r.open(b.urlRetail,"_blank").opener=null;else if("undefined"==typeof t.isNotClickable||"undefined"!==t.isNotClickable&&!t.isNotClickable){var s=x[i.features.enableCllTileNavigation],u=x[i.features.enableCllRoutingL2];if(m.isCllAccount(t)&&(!s||!u))return U.handlekeyEvents(e),void(r.open(b.urlRetail,"_blank").opener=null);var l={accountReferenceId:t.referenceId,ProductName:t.originalProductName.replace(/\s+/g,""),accountDetails:{lineOfBusiness:t.category,accountNumber:t.accountNumberTLNPI}};if("CC"===t.category&&(l.ProductName=t.accountStatus&&t.accountStatus===i.C_Off?"Recovery":"Card",e&&(e.currentTarget&&/viewMore/i.test(e.currentTarget.id)||"view transactions"===e._quickAction)&&(l.accountDetails.scrollToTransactions=!0)),"COI"===t.category){d.pubsubTrackAnalytics({name:"COFI Tile:button"});var g="ease-ui"+i.kBuildVersionPath+"/dist/features/AccountSummary/html/cofiLinkout-index.html";g+="?accountReferenceId="+encodeURIComponent(t.referenceId),g+="&customerRole="+t.customerRole,r.open(g,"_blank").opener=null,U.handlekeyEvents(e)}t.subCategory&&(l.accountDetails.subCategory=t.subCategory),t.productId&&(l.accountDetails.productId=t.productId),U.selected=a,e&&e.currentTarget&&"View More"===e.currentTarget.innerHTML?d.pubsubTrackAnalytics({name:"singleAccount view more:link"}):n===i.states.kCreditCardRewardLink?d.pubsubTrackAnalytics({name:"rewards:link"}):"singleProduct"===U.isSingleProductViewData()&&d.pubsubTrackAnalytics({name:"singleAccount transaction:link"}),n?o.go(n,l).then(function(){U.stopPropagation(e)}):o.go(m.SelectDetailsTransaction(t).lobType+"Details.transactions",l).then(function(){U.stopPropagation(e)})}else U.enableActions()}},isModalLoading:function(){for(var e in U.loadingButton)if("loading"===U.loadingButton[e])return!0;return!1},trimmmedAccountNumber:function(e){return e.substring(e.length-4,e.length)},GetImage:function(e){return U.ImagePath="/ease-ui"+i.kBuildVersionPath+"/dist/features/AccountSummary/images/"+e+".png",!0},getPointer:function(e){return e.isDisplayAccount},getTileData:function(e){var t,a;switch(e.experience=U.AB_TEST.qamButton.currentExperience,e.showActionButton=!0,e.secondaryDataPercent=!1,e.templateCategory){case"DDA":case"MMA":t=T["ease.core.accountsummary.tile.arialabel.details2"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.availbal.label"];break;case"LOC":case"ILA":t=T["ease.core.accountsummary.tile.arialabel.details4"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.currbal.label"];break;case"SA":t=T["ease.core.accountsummary.tile.arialabel.saving"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.availbal.label"];break;case"AL":t=T["ease.core.accountsummary.tile.arialabel.details3"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.principal.label"];break;case"COI":t=T["ease.core.accountsummary.tile.arialabel.cofi"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.accval.label"];break;case"CD":t=T["ease.core.accountsummary.tile.arialabel.details2"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.cdbal.label"];break;case"CC":t=T["ease.core.accountsummary.tile.arialabel.creditcard"],a=T["ease.core.accountsummary.tile.arialabel.details1"],e.balanceLabel=T["ease.core.acctsummary.currbal.label"];break;case"default":default:return}m.isSmallBusinessBankAccount(e)&&(e.showActionButton=x&&x[i.features.enableSBAccounts]),m.isCllAccount(e)&&(e.showActionButton=x&&x[i.features.enableCllTileNavigation]),e.balanceAriaLabel=U.getAriaTileMsg(t,e.displayName,D("currency")(e.amount),e.negativeBalance),U.accountSummaryAccountDetail&&a&&(e.secondaryDataAriaLabel=U.getAriaTileMsg(a,U.accountSummaryAccountDetail.secondaryData.secLabel,D("currency")(U.accountSummaryAccountDetail.secondaryData.secValue),e.displayName,!1)),e.showQuickAction=function(t){var a=["QuickSilver","Venture","Savor","360 Savings","360 Checking","360 Money Market","Retail Interestplus Online Savings"],n=["closed","restricted","critical"],o=a.filter(function(t){return e.originalProductName.toLowerCase().indexOf(t.toLowerCase())>-1}),r=e.templateCategory===ProductCategory.Card?o.length>0&&"Primary"===e.customerRole&&"A"!==U.AB_TEST.qamButton.currentExperience:o.length>0&&"A"!==U.AB_TEST.qamButton.currentExperience,c=e.templateCategory===ProductCategory.Card||e.templateCategory===ProductCategory.Retail||e.templateCategory===ProductCategory.Checking360||e.templateCategory===ProductCategory.Savings360,i=!e.accountMessage||0===e.accountMessage.length||-1===n.indexOf(e.accountMessage[0].level);return c&&B&&B.experience&&r&&i}},setTileLoadingOnAccount:function(e,t){e&&e.tileScopeRef&&e.setTileHeight&&"function"==typeof e.setTileHeight&&(e.tileScopeRef.loading=t?"loading":"",e.setTileHeight(e.tileElementRef,t))},quickAction:{tooltipContent:'\n          <ul role="menu" aria-hidden="{{summary.quickAction.tooltipOptions.itemTabIndex === -1 ? true : false}}"\n            tabindex="{{summary.quickAction.tooltipOptions.itemTabIndex}}"\n            data-ng-keydown="summary.quickAction.keydown(this, $event, element)"\n          >\n            <li class="quickaction__item" data-ng-repeat="item in summary.quickAction.menuOptions"\n              data-index="{{$index}}"\n              data-ng-if="!!!item.display || item.display(element)"\n              data-ng-click="summary.quickAction.tooltipActionWrapper(this, item, $event, element)"\n              role="menuitem"\n              tabindex="{{summary.quickAction.tooltipOptions.itemTabIndex}}"\n              >\n              <span class="ease-itemlabel">{{item.label}}</span>\n            </li>\n          </ul>',keydown:function(e,t,a){var n={13:function(){var n=t.target.attributes["data-index"].value,o=e.summary.quickAction.menuOptions[n];e.summary.quickAction.tooltipActionWrapper(e,o,t,a)},38:function(){e.summary.quickAction.tooltipSetFocusToNext(t,e,-1)},40:function(){e.summary.quickAction.tooltipSetFocusToNext(t,e,1)}};n[t.keyCode]&&e&&e.summary&&e.summary.quickAction&&(t.preventDefault(),n[t.keyCode]())},menuOptions:[],dynamicTooltipOptions:function(e){return this.tooltipOptions.tileIndex=e,this.tooltipOptions.showIcon=U.AB_TEST.qamButton.experiences[U.AB_TEST.qamButton.currentExperience].icon,this.tooltipOptions.position="bottom-right",this.tooltipOptions.class=U.quickAction.setTooltipOptionsClass(),this.menuOptions=U.AB_TEST.qamButton.menuOptions[U.AB_TEST.qamButton.type],this.tooltipOptions},tooltipOptions:{itemTabIndex:-1,position:"",showIcon:"",size:"",showOnClick:!0,class:"tooltip--quickaction",ariaLabel:"Quickaction Menu",attrs:["quickaction-set-tile-spinner"],triggerBehaviorCallback:function(e,t){return d.pubsubTrackAnalytics({name:"ease:account summary:brick menu:button"}),e.cancelBubble=!0,"phone"===t.config.device?(this.summary.quickAction.openQuickActionModal(e,t,this),!1):(this.summary.quickAction.tooltipOptions.itemTabIndex=0,"keydown"===e.type&&e.currentTarget.getElementsByClassName("quickaction__item")[0].focus(),"click"===e.type&&e.currentTarget.getElementsByTagName("ul")[0].focus(),void this.$apply())}.bind(a),exitBehaviorCallback:function(e,t){this.summary.quickAction.tooltipOptions.itemTabIndex=-1,this.$apply()}.bind(a)},setTooltipOptionsClass:function(){switch(U.AB_TEST.qamButton.currentExperience){case"A":return"tooltip--quickaction";case"B":return"tooltip--quickaction tooltip--quickaction__overflow-circle-kabab";case"C":
return"tooltip--quickaction tooltip--quickaction__overflow-horizontal";case"D":return"tooltip--quickaction tooltip--quickaction__overflow-circle-plus";default:return"tooltip--quickaction"}},tooltipActionWrapper:function(e,t,a,n){R.setTileLoadingOnAccount(n,!0),t.action(a,n),a.cancelBubble=!0,a.target.blur()},modalActionWrapper:function(e,t,a){R.setTileLoadingOnAccount(a,!0),e.item.action(t,a),e&&"function"==typeof e.close&&e.close()},tooltipSetFocusToNext:function(e,t,a){var n=e.currentTarget;if("UL"===n.tagName){var o=[].slice.call(n.children).indexOf(e.target),r=n.children[o+a];r?r.focus():t.summary.quickAction.tooltipClose(e)}},tooltipClose:function(e){e.target.blur()},openQuickActionModal:function(e,t,a){var n=a.summary;n.account=a.summary.accounts[t.config.tileIndex],n.originalEvent=e,M.showModal({templateUrl:"/ease-ui/dist/features/AccountSummary/html/quickActionModal.html",controller:"QuickActionMobileModalController",inputs:n})},modalOptions:{showTitleInBar:!1,hideCloseButton:!1,hideBar:!0,fullScreen:!0}},getDefaultAriaLabel:function(e){return U.getAriaTileMsg(T["ease.core.accountsummary.tile.arialabel.details2"],e.displayName,D("currency")(e.amount),e.negativeBalance)},getSummaryTemplate:function(e,t){var a=m.isInActiveProduct(e);e.isNotClickable=a.isNotClickable,e.templateCategory=a.category,U.getTileData(e),e.category&&"COI"===e.category.toUpperCase()&&(x&&!x[i.features.enableCofiTileNavigation]?e.isNotClickable=!0:e.isNotClickable=!1,e.hasNoLoadingClass=!0),m.isSmallBusinessBankAccount(e)?(e.isNotClickable=!(x&&x[i.features.enableSBAccounts]),U.viewMoreDisabled=!0):m.isCllAccount(e)?(e.isNotClickable=!(x&&x[i.features.enableCllTileNavigation]),U.viewMoreDisabled=!0):e.subCategory&&"retail"===e.subCategory.toLowerCase()&&(x&&!x[i.features.isRetailToggleRestricted]?e.isNotClickable=!0:e.subCategory&&"retail"===e.subCategory.toLowerCase()&&x&&x[i.features.enableRetailNavigation]&&-1===["DDA","SA","MMA","CD"].indexOf(e.category)?e.isNotClickable=!0:x&&x[i.features.enableRetailNavigation]&&(e.isNotClickable=!1),U.viewMoreDisabled=!0);var n=l.getSummaryTypeTemplate(a.category);return n.match("default.html$")&&(e.isNotClickable=!0),x[i.features.enableRecoveryTiles]&&e&&e.accountStatus&&e.accountStatus===i.C_Off?i.kPathRecoveryPartial:n},GetModalPaymentTemplate:function(e){return l.getModalTemplate(e)},isSingleProductViewData:function(){return 1===U.accountSummaryData.length?(p.getFeatureToggleData(),U.accountSummaryData[0].singleAccountTrxViewEnabled?"singleProduct":"toggleRestrictedMessage"):"multipleProduct"},displaySingleProductViewTransactions:function(){return"singleProduct"===this.isSingleProductViewData()&&!this.showSingleProductViewNGElement},displaySingleProductAngularElement:function(){return"singleProduct"===this.isSingleProductViewData()&&this.showSingleProductViewNGElement},isDetailAccessible:function(e){var t=!0;return e.accountMessage&&("closed"===e.accountMessage[0].level||"restricted"===e.accountMessage[0].level?t=!1:e.accountStatus&&e.accountStatus===i.C_Off&&(t=!1)),t},showViewMoreButton:!0,isSecondaryData:function(){return U.accountDetailloadingClass=i.loading,U.isDetailAccessible(U.accountSummaryData[0])?(U.accountDetailloadingClass="",U.accountSummaryAccountDetail={},U.accountSummaryAccountDetail.amountSymbol=S.NUMBER_FORMATS.CURRENCY_SYM,U.accountSummaryAccountDetail.secondaryData=l.formatSecondaryData(U.accountSummaryData[0],U.accountSummaryAccountDetail),U.accountSummaryAccountDetail.percentage="%",l.showSecondaryData(U.accountSummaryAccountDetail.secondaryData)):(U.showSecondaryData=!1,void(U.accountDetailloadingClass=""))},getSingleProductViewData:function(){U.transactionsloadingClass=i.loading,U.accountDetailloadingClass=i.loading,U.accountSummaryAccountDetail={},U.accountDetailFormatClass="formatLoading",U.accountSummaryAccountDetail.secondaryData=l.formatSecondaryData(U.accountSummaryData[0],U.accountSummaryAccountDetail),U.accountDetailloadingClass="",U.showSecondaryData=l.showSecondaryData(U.accountSummaryAccountDetail.secondaryData);var e={lineOfBusiness:m.SelectDetailsTransaction(U.accountSummaryData[0]).lobType,ProductCategory:U.accountSummaryData[0].category,accountNumber:U.accountSummaryData[0].accountNumberTLNPI};U.isDetailAccessible(U.accountSummaryData[0])?A.getSingleProductViewData(e,U.accountSummaryData[0].referenceId).then(function(t){U.accountDetailloadingClass="",t.displayMessage?(U.transactionsloadingClass="noTransaction",U.transactionerror=t.displayMessage,U.errorFlag=!0):void 0===t.transactionsResponse&&void 0===t.accountDetails?(U.accountSummaryAccountDetail.amountSymbol=S.NUMBER_FORMATS.CURRENCY_SYM,U.accountSummaryAccountDetail.percentage="%",U.transactionsloadingClass="noTransaction",U.transactionerror=U.i18nContent["ease.core.acctsummary.single.norecent.label"],U.errorFlag=!0):("DDA"===U.accountSummaryData[0].category||"SA"===U.accountSummaryData[0].category||"MMA"===U.accountSummaryData[0].category||"CC"===U.accountSummaryData[0].category||"AL"===U.accountSummaryData[0].category||"ILA"===U.accountSummaryData[0].category?U.accountSummaryAccountDetail=t.transactionsResponse.transactions:U.accountSummaryAccountDetail=t.accountDetails,U.accountSummaryAccountDetail.amountSymbol=S.NUMBER_FORMATS.CURRENCY_SYM,U.accountSummaryAccountDetail.percentage="%",U.transactionsloadingClass="",U.accountSummaryAccountDetail.secondaryData=l.formatSecondaryData(U.accountSummaryData[0],U.accountSummaryAccountDetail,U.i18n),U.accountDetailloadingClass="",U.showSecondaryData=l.showSecondaryData(U.accountSummaryAccountDetail.secondaryData),"DDA"===U.accountSummaryData[0].category||"SA"===U.accountSummaryData[0].category||"MMA"===U.accountSummaryData[0].category||"CC"===U.accountSummaryData[0].category||"AL"===U.accountSummaryData[0].category||"ILA"===U.accountSummaryData[0].category?U.accountSummaryTransactionData=A.formatDataForSingleProdView(t.transactionsResponse.transactions,e.ProductCategory):U.accountSummaryTransactionData=A.formatDataForSingleProdView(t,e.ProductCategory),0===U.accountSummaryTransactionData.length?(U.transactionsloadingClass="noTransaction",U.transactionerror=U.i18nContent["ease.core.acctsummary.single.norecent.label"],U.errorFlag=!0):U.transactionsloadingClass="yesTransaction")},function(e){throw U.accountDetailloadingClass="",U.transactionsloadingClass="noTransaction",U.transactionerror=U.i18nContent["core.common.snag.transactions.label"],U.errorFlag=!0,g.createEaseException({module:"summaryModule.controller",function:"accountSummaryController.getSingleProductViewData",cause:e})}):(U.showViewMoreButton=!1,U.showSecondaryData=!1,U.accountDetailloadingClass="",U.transactionsloadingClass="noTransaction",U.transactionerror=U.i18nContent["ease.core.acctsummary.single.norecent.label"],U.errorFlag=!0)},isCabelas:function(e){return e===i.coBrandId.cabelas},isBassPro:function(e){return e===i.coBrandId.bassPro},reward:{hoverState:q,role:q?"link":"",parentDivTabIndex:q?-1:0,spanTabIndex:q?0:-1,divAriaLabel:function(e){return q?"":this.ariaLabel(e)},spanAriaLabel:function(e){return q?this.ariaLabel(e):""},display:function(e){return e=e?e:U.accountSummaryData[0],"undefined"!=typeof e&&"undefined"!=typeof e.reward&&"undefined"!=typeof e.reward.rewardsBalanceDisplay&&e.reward.rewardsBalanceDisplay},isCash:function(){var e=[U.i18nContent["ease.core.acctsummary.rwdCurrencyCash"],U.i18nContent["ease.core.acctsummary.rwdCurrencyClubPoints"]];return U.reward.display()&&"undefined"!=typeof U.accountSummaryData[0].reward.currency&&e.indexOf(U.accountSummaryData[0].reward.currency)>-1},isClickable:function(e){e=e?e:U.accountSummaryData[0];var t=e.coBrandId;return!x[i.features.suppressCabelasAndBassProRewardsLink]||!t||!(U.isCabelas(t)||U.isBassPro(t))},amount:function(){return U.reward.display()&&"undefined"!=typeof U.accountSummaryData[0].reward.balance?U.accountSummaryData[0].reward.balance:""},category:function(){var e=U.reward.display()&&"undefined"!=typeof U.accountSummaryData[0].reward.currency?U.accountSummaryData[0].reward.currency:"",t={};return t[U.i18nContent["ease.core.acctsummary.rwdCurrencyCash"]]=U.i18nContent["ease.core.acctsummary.rwdCash"],t[U.i18nContent["ease.core.acctsummary.rwdCurrencyMiles"]]=U.i18nContent["ease.core.acctsummary.rwdMiles"],t[U.i18nContent["ease.core.acctsummary.rwdCurrencyPoints"]]=U.i18nContent["ease.core.acctsummary.rwdPoints"],t[U.i18nContent["ease.core.acctsummary.rwdCurrencyClubPoints"]]=U.i18nContent["ease.core.acctsummary.rwdClubPoints"],""===e?"":t[e]},ariaLabel:function(e){var t=U.reward.isCash()?"currency":"number";return U.getAriaTileMsg(U.i18nContent["ease.core.accountsummary.tile.arialabel.details1"],U.reward.category(),D(t)(U.reward.amount()),e,!1)},navigateToRewards:function(t,a,n){if(x[i.features.cardRewards]){t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0;var o=e.element(document.getElementsByClassName("atddAccountType")).children()[0];e.element(o).addClass(i.loading),U.goToDetail(t,a,n,i.states.kCreditCardRewardLink)}}}}),1!==U.accountSummaryData.length||U.showSingleProductViewNGElement||(x[i.features.coafSingleAccountTransactionViewFeature]&&"AL"===U.accountSummaryData[0].category?U.getSingleProductViewData():"AL"!==U.accountSummaryData[0].category&&U.showRecentTransactions()&&U.getSingleProductViewData()),1===U.accountSummaryData.length&&U.showSingleProductViewNGElement&&(U.showSecondaryData=U.isSecondaryData()),a.$watch(function(){return U.pendingRequest},function(e){n.$broadcast("disable",e)},!0),U.greeting=y.getDefaultGlobalMessage(),U.showHeroBarNGElement||y.getCustomerMessage().then(function(e){e&&(U.greeting=e)}),y.chat247()}function o(e,t,a,n,o,r){e.quickAction=n,e.menuOptions=n.menuOptions,e.account=o,e.originalEvent=r,e.close=t}var r=e.module("summaryModule");r.controller("AccountSummaryController",n).controller("QuickActionMobileModalController",o),n.$inject=["$scope","$rootScope","$state","$window","$location","EaseConstant","EaseConstantFactory","accountSummaryData","TemplateSelectionFactory","EASEUtilsFactory","pubsubService","easeExceptionsService","messagingService","transferState","featureToggleFactory","RetailAccountLinks","$locale","SingleProdService","NotifyingService","InterstitialMessageService","$log","i18nContent","$filter","interPageService","prefetchFactory","easeUIModalService","quickActionMenu","adobeCampaignUtils","heroBarNGElement","accountSummaryElement","showNGAccountSummaryErrorMessage","singleProductViewNGElement"],o.$inject=["$scope","close","easeUIModalService","quickAction","account","originalEvent"]}),define("AccountSummaryDirectives",["angular"],function(e){"use strict";function t(e,t,a,n,o,r,c,i,s,u,l){function m(e){if(e.element&&e.element.validAsOfTimestamp&&_.isEqual(e.element.category,"CC")){var t=new Date(e.element.validAsOfTimestamp);e.messageObj={type:"GENERAL",level:"critical",message:"Your account details were last updated "+n("date")(t,"MMM d 'at' HH:mm a")+"."}}}function d(l,d){l.element.checkAmountDigits=function(){if(l.element.amount>999999){var e=document.getElementsByClassName("amount");e[l.index].classList.add("million")}},t.getFocusForEscapeHatch();var g=s;l.loading="",l.alertIcon=c.urlContent+r.images[u.kAlertIconYellow],l.constant=r,d.bind("click",function(){l.element.isNotClickable||l.element.hasNoLoadingClass||(this.childNodes[0].style.height=this.childNodes[0].clientHeight+"px",l.loading="loading")});var y=function(){if(!(l.nbrOfAccount>=1)){var t=e.getSecondaryDataForLob(l.element,l.messageObj,l.nbrOfAccount),a=!1;if(null!==t&&l.nbrOfAccount>=1)if(null!==t.attrVal&&void 0!==l.element[t.attrVal]){var o=l.element[t.attrVal];l.messageObj={type:"SecondaryData",level:"",message:t.message+isNaN(o)?"":n("currency")(o)},a=!0}else l.messageObj=t,a||(l.messageObj={type:"SecondaryData",level:"",message:t[0]?t[0].message:""}),a=!0;a||"undefined"!=typeof t[0]&&(l.messageObj={type:"SecondaryData",level:"",message:t[0].message})}};if(l.element.contentImage){var f=c.urlContent;t.isHighDensityScreen()?(l.element.bground=f+l.element.contentImage.hiRes.tileBackground,l.element.imagePath=l.element.contentImage.hiRes.logo?f+l.element.contentImage.hiRes.logo:""):(l.element.bground=f+l.element.contentImage.lowRes.tileBackground,l.element.imagePath=l.element.contentImage.lowRes.logo?f+l.element.contentImage.lowRes.logo:"")}l.element.accountMessage&&l.element.accountMessage.length>0?l.element.accountMessage[0].message?l.messageObj=l.element.accountMessage[0]:(l.element.accountMessage[0].message="",l.messageObj=l.element.accountMessage[0],m(l)):(y(),m(l));var p=function(){var e=l.element.accountMessage,t=e.indexOf(l.messageObj);l.messageObj=e[t+1],e[t].responseUrlHref&&a.responseMessageApi(e[t].responseUrlHref,"DISMISS","summary","50000")};l.dismissMessage=function(e){p(),y(),e.preventDefault(),e.stopPropagation()},l.navigateToMudFlapLink=function(e,n){n.msgLink.path&&(t.redirectLinking(n.msgLink),i.pubsubTrackAnalytics({name:"mudflap:link",interactionMessage:{click:n.messageAnalyticsTracker}}),n.responseUrlHref&&a.responseMessageApi(n.responseUrlHref,"ACCEPT","summary","50000")),e.stopPropagation()},l.getStateMessageClass=function(){var e="";return l.selected!==l.index&&void 0!==l.messageObj&&void 0!==l.messageObj.message&&(e+=""!==l.messageObj.message&&"open"===l.messageObj.level?"info":l.messageObj.level?l.messageObj.level:"info"),1===l.nbrOfAccount&&(l.messageObj&&"togglerestricted"===l.messageObj.level&&""===e&&(e+="togglerestricted"),e+=" info singleProdView"),e.trim()},l.isHideStateMessage=function(e){var t=o.getFeatureToggleData();if(t[r.features.enableMudFlap]===!1&&void 0!==l.messageObj&&void 0!==l.messageObj.article)return!0;var a=["togglerestricted","unavailable","restricted","closed"];e&&e.accountStatus&&e.accountStatus.toLowerCase()===r.C_Off.toLowerCase()&&a.push("critical");var n=l.selected===l.index&&"loading"===l.loading,c=l.messageObj,i=c&&-1!==a.indexOf(c.level),s="undefined"==typeof l.messageObj||"undefined"==typeof l.messageObj.message;return n||i||s},l.getTruncatedMessage=function(){return l.messageObj&&"critical"===l.messageObj.level?l.messageObj.message:""},l.showAlertIcon=function(){return!!l.messageObj&&-1!==["critical","closed","restricted"].indexOf(l.messageObj.level)},l.showCustomIcon=function(){var e=_.get(l,["messageObj","article","section",0,"media",0]);return!(!e||!e.path)&&(l.messageObj.path=e.path.trim(),l.messageObj.altText=e.altText?e.altText.trim():"",!0)},l.showCloseIcon=function(e){return e&&e.article&&e.article.section[0]&&e.article.section[0].button?e.article.section[0].button.some(function(e){return"dismiss"===e.responseType.toLowerCase()}):void 0},l.service=a,l.$watch("service.messagingReferenceId",function(e,t){(e||e===t)&&a.messages.forEach(function(e){if(l.element.referenceId===e.messagingReferenceId){if(l.element.accountMessage||(l.element.accountMessage=[]),0===l.element.accountMessage.length){var t=e.flapMessages.length;if(!l.element.validAsOfTimestamp){if(t>0)for(var a=0;t>a;a++)l.element.accountMessage.push(e.flapMessages[a]);l.element.accountMessage.length>0&&(l.messageObj=l.element.accountMessage[0])}}if(e.buttonMessage)l.element.actionButton=e.buttonMessage;else{var n={action:g["ease.core.acctsummary.viewAccount.buttontext.label"]||r.defaultBtnAction,buttonText:g["ease.core.acctsummary.viewAccount.buttontext.label"]||r.defaultBtn,messageAnalyticsTracker:"",pubsub:"default"};l.$evalAsync(function(){l.element.actionButton=n})}}})})}return{restrict:"AE",transclude:!0,scope:{selected:"=selected",index:"=idx",element:"=obj",nbrOfAccount:"=nbrOfAccount"},templateUrl:"/ease-ui/dist/features/AccountSummary/html/directives/accountMessage.html",link:d}}function a(){function t(t,a){a.bind("error",function(){t.summary.greeting.showDefaultBgImg=!0,a[0].src=""}),a.bind("load",function(){var t='url("'+a[0].src+'")',n=document.getElementById("humanity");e.element(n).addClass("bgImgAnimation"),n.style["background-image"]=t})}return{restrict:"A",link:t}}function n(){var e=function(e,t){var a=function(e,t){t&&e&&e.style?e.style.height=e.clientHeight+"px":e.style.height=""},n=function(e){for(var t=e;t;){if(t.classList&&t.classList.contains("atddAccountType"))return t;t=t.parentElement}},o=function(e){for(var t=e;t;){if(void 0!==t.loading)return t;t=t.$parent}};e.element.tileScopeRef=o(e),e.element.tileElementRef=n(t[0]),e.element.setTileHeight=a};return{restrict:"A",link:e}}var o=e.module("summaryModule");o.directive("localizedCurrency",["$locale","EASEUtilsFactory","$window",function(t,a,n){return{retrict:"E",scope:{amount:"=",signClass:"@",symbolClass:"@",preSymbolClass:"@",sufSymbolClass:"@",amountDollarsClass:"@",amountCentsClass:"@"},templateUrl:"/ease-ui/dist/features/AccountSummary/html/directives/currency.html",link:function(o){var r=t.NUMBER_FORMATS.PATTERNS[1],c="¤",i=t.NUMBER_FORMATS.CURRENCY_SYM,s=r.negPre.indexOf(c)>-1||r.posPre.indexOf(c)>-1,u=a.getDollarsAndCents(Math.abs(o.amount)),l=u.dollars,m=u.cents,d=Math.abs(o.amount);if(o.million=!1,Math.abs(o.amount)>999999&&(o.million=!0),"value"===o.amountDollarsClass){var g=n.matchMedia("only screen and (max-width  : 600px)");g.matches&&(o.showDecimalSep=!0);var y=function(e){o.$evalAsync(function(){e.matches?o.showDecimalSep=!0:o.showDecimalSep=!1})};g.addListener(y),o.$on("$destroy",function(){g.removeListener(y)})}o.decimalSep="value"===o.amountDollarsClass?t.NUMBER_FORMATS.DECIMAL_SEP+" ":"",e.extend(o,{sign:o.amount<0?"-":"",absoluteAmount:d,dollars:l,cents:m,currencySymbolPre:s?i:"",currencySymbolSuf:s?"":i})}}}]),o.directive("accountMessage",t),t.$inject=["TemplateSelectionFactory","EASEUtilsFactory","messagingService","$filter","featureToggleFactory","EaseConstant","ContentAccountLinks","pubsubService","i18nContent","ContentConstant","adobeCampaignUtils"],o.directive("noCustomImg",a),o.directive("quickactionSetTileSpinner",n)}),define("AccountSummarySingleProdService",["angular"],function(e){"use strict";function t(e,t,a,n,o){if(e&&"string"==typeof t&&e[t])a[n]=e[t];else if("object"==typeof t&&t.length>0){for(var r=0;r<t.length;r++)if(e[t[r]]){a[n]=e[t[r]];break}}else o&&(a[n]=o)}function a(e,a,n,o,r,c,i,s,u,l){return{getSingleProductViewData:function(e,t){return this.getAccountDetailData(e,t)},getAccountDetailData:function(e,t){"undefined"==typeof e.next&&(e.next=0),"undefined"==typeof e.filter&&(e.filter=o.kBaseSetTransactions),"undefined"==typeof e.type&&(e.type="/");var a={"spv-angular":"false"},n=c.createAccountDetailUrl(e,encodeURIComponent(t));return s.all(n).customGET("",{},a).then(function(e){return c.IsFooterDisplaySet(!1),e.accountRefId=t,e}).catch(function(e){return u.getErrorMessage(e,"",l["core.common.snag.transactions.label"])})},formatDataForSingleProdView:function(e,t){var a=[];if("CD"===t?("undefined"!=typeof e.transactions.scheduled&&a.push.apply(a,addGlobalAttributeToObject(e.transactions.scheduled,"transactionState","scheduled")),"undefined"!=typeof e.transactions.pending&&a.push.apply(a,addGlobalAttributeToObject(e.transactions.pending,"transactionState","pending")),"undefined"!=typeof e.transactions.entries&&a.push.apply(a,addGlobalAttributeToObject(e.transactions.entries,"transactionState","posted")),"undefined"!=typeof e.transactions.posted&&a.push.apply(a,addGlobalAttributeToObject(e.transactions.posted,"transactionState","posted"))):a=e,a.length>0){var n=function(e){return new Date(e)},o=function(e,t){return n(t.transactionDate).getTime()-n(e.transactionDate).getTime()},r={};r="DDA"===t||"SA"===t||"MMA"===t||"CC"===t||"AL"===t||"ILA"===t?this.structureTransactionJson(a,t).splice(0,5):this.structureTransactionJson(a,t).sort(o).splice(0,5);for(var i=[],s=0;s<=r.length-1;s++)"Scheduled"===r[s].transactionState&&(i.push(r[s]),r.splice(s,1),s--);if(i=c.mapSort(i,"transactionDate",!1),r=i.concat(r),"CD"===t){for(var u={},s=0;s<r.length;s++)void 0===u[r[s].transactionState.toLowerCase()]&&(u[r[s].transactionState.toLowerCase()]=[]),u[r[s].transactionState.toLowerCase()].push(r[s]);r=[],u.scheduled&&(r=r.concat(u.scheduled)),u.pending&&(r=r.concat(u.pending)),u.posted&&(r=r.concat(u.posted))}return r}return a},structureTransactionJson:function(e,a){for(var n=[],o=0;o<e.length;o++){var r=e[o],c={},s=new Date,u=s.toISOString();if("CC"===a)t(r,"displayDate",c,"transactionDate"),t(r,"merchant",c,"merchant"),t(r,"date",c,"transactionDate"),t(r,"categoryIconURL",c,"categoryIconURL"),t(r,"description",c,"transactionDescription"),t(r,"amount",c,"transactionAmount"),c.transactionAmount<0&&(c.creditTransaction="creditTransaction"),c.transactionAmount=i(c.transactionAmount),t(r,"transactionState",c,"transactionState");else if("AL"===a)t(r,"merchant",c,"merchant"),t(r,"date",c,"transactionDate",u),t(r,"categoryIconURL",c,"categoryIconURL",""),t(r,"transactionDescription",c,"transactionDescription","N/A"),t(r,"transactionAmount",c,"transactionAmount","0"),c.transactionAmount=i(c.transactionAmount),t(r,"transactionState",c,"transactionState","N/A"),t(r,"transactionType",c,"transactionType","N/A");else if("ILA"===a)t(r,"merchant",c,"merchant"),t(r,"date",c,"transactionDate",u),t(r,"categoryIconURL",c,"categoryIconURL",""),t(r,"transactionDescription",c,"transactionDescription","N/A"),t(r,"transactionAmount",c,"transactionAmount","0"),c.transactionAmount=i(c.transactionAmount),t(r,"transactionState",c,"transactionState","N/A");else if(-1!==["DDA","DDA360","SA","SA360","CD","MMA"].indexOf(a)){if(t(r,"merchant",c,"merchant"),t(r.transactionOverview,"transactionDate",c,"transactionDate",u),t(r.transactionIcon,"href",c,"categoryIconURL",""),t(r.transactionOverview,"transactionTitle",c,"transactionDescription","N/A"),t(r.transactionOverview,"transactionAmount",c,"transactionAmount","0"),r.debitCardType){c.debitCardType=r.debitCardType;var l="debit"===r.debitCardType.toLowerCase()?"-":"+";c.transactionAmount=l+i(c.transactionAmount)}else c.transactionAmount="+"+i(c.transactionAmount);t(r,"transactionState",c,"transactionState","N/A")}else t(r,"merchant",c,"merchant"),t(r,"transactionDate",c,"transactionDate",u),t(r,"categoryIconURL",c,"categoryIconURL",""),t(r,"transactionDescription",c,"transactionDescription","N/A"),t(r,"transactionAmount",c,"transactionAmount","0"),c.transactionAmount=i(c.transactionAmount),t(r,"transactionState",c,"transactionState","N/A");_.isEmpty(c)||n.push(c)}return n}}}var n=e.module("summaryModule");return n.factory("SingleProdService",a),a.$inject=["$q","Restangular","EaseConstantFactory","EaseConstant","easeExceptionsService","EASEUtilsFactory","easeCurrencyFilter","EaseCoreRestangular","EaseErrorMessageFactory","i18nContent"],n}),define("AccountSummaryBundle",["AccountSummaryModule","AccountSummaryServices","AccountSummaryController","AccountSummaryDirectives","AccountSummarySingleProdService"],function(){});