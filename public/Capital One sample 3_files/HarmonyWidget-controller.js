define(["require","exports","angular"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t,n,a,i){var o=this;this.$window=e,this.EaseConstant=t,this.HarmonyWidgetService=n,this.$location=a,this.$scope=i,this.changingState=!1,this.harmonyWidgetContentClass=function(){return"Feature"===o.harmonyWidgetData.messageLayout?o.harmonyWidgetData.isDismissed?"harmonyWidgetDeclinedWrapper":"featureTemplate_widget_content":o.harmonyWidgetData.isDismissed?"harmonyWidgetDeclinedWrapper":"ease-widget__content"},this.accept=function(){if(o.HarmonyWidgetService.postToHarmony(o.harmonyWidgetData.harmonyUrl,"ACCEPT",o._respondToHarmonyId),o.HarmonyWidgetService.formatAndSendAnalytics("accept"),o.harmonyWidgetData.isAcceptLinkExternal)o.$window.open(o.harmonyWidgetData.acceptLink,"_blank").opener=null;else{var e=o.$scope.$on("$stateChangeSuccess",function(){o.changingState=!1}),t=o.$scope.$on("$stateChangeError",function(){o.changingState=!1});o.$scope.$on("$destroy",function(){e(),t()}),o.changingState=!0,o.$location.path(o.harmonyWidgetData.acceptLink)}},this.decline=function(){o.HarmonyWidgetService.setHarmonyData({isDismissed:!0,smallImage:null,mediumImage:null,largeImage:null,imageClass:null,acceptCtaButtonText:null,declineCtaButtonText:null}),o.HarmonyWidgetService.getHarmonyData().then(function(e){o.harmonyWidgetData=e}),o.HarmonyWidgetService.postToHarmony(o.harmonyWidgetData.harmonyUrl,"DECLINE",o._respondToHarmonyId),o.HarmonyWidgetService.formatAndSendAnalytics("decline"),o.changingState=!1},this._respondToHarmonyId=this.EaseConstant.busEvtId.harmonyWidget.respondToOfferId,this.HarmonyWidgetService.getHarmonyData().then(function(e){o._initializeData(e)})}return e.prototype._initializeData=function(e){this.harmonyWidgetData=n.extend({},e)},e.$inject=["$window","EaseConstant","HarmonyWidgetService","$location","$scope"],e}();t.HarmonyWidgetController=a,n.module("HarmonyWidgetModule").controller("HarmonyWidgetController",a)});